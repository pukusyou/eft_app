jQuery(function () { var a = null != getParam("check") ? getParam("check") : localStorage.getItem("tasks"); a = decompressBinary(a); var b = 0; $("input[type=checkbox][name=task]").each(function () { "A" == a[b++] && $(this).prop("checked", !0) }) }); $(document).on("click", "input", function () { localStorage.setItem("tasks", compress()) });
function all_check(a) { var b = "#" + a + "_button"; if ("\u5168\u9078\u629e" == $(b).text()) { var c = !0; $(b).text("\u9078\u629e\u89e3\u9664"); $(b).attr("class", "btn btn-info") } else c = !1, $(b).text("\u5168\u9078\u629e"), $(b).attr("class", "btn btn-primary"); $("." + a + "_task").each(function () { "none" != $(this).css("display") && ($(this).find("." + a).prop("checked", c), localStorage.setItem("tasks", compress())) }) }
function compress() { var a = []; $("input[type=checkbox][name=task]").each(function () { this.checked ? a.push("A") : a.push("B") }); return compressBinary(a.join("")) } function compressBinary(a) { let b = "", c = 1; for (let d = 1; d < a.length; d++)a[d] === a[d - 1] ? c++ : (b += c + a[d - 1], c = 1); return b += c + a[a.length - 1] } function decompressBinary(a) { let b = "", c = ""; if (null != a) { for (let d = 0; d < a.length; d++)if (isNaN(parseInt(a[d]))) { for (let e = 0; e < parseInt(c); e++)b += a[d]; c = "" } else c += a[d]; return b } }
$(document).on("click", "#setting", function () { $("#url").val("https://pukusyou.com/task/?check=" + compress()); $(document).on("click", "#copy", function () { navigator.clipboard.writeText($("#url").val()); $(".success-msg").fadeIn("slow", function () { $(this).delay(2E3).fadeOut("slow") }) }) }); function getParam(a, b) { b || (b = window.location.href); a = a.replace(/[\[\]]/g, "\\$&"); return (a = (new RegExp("[?&]" + a + "(=([^&#]*)|&|#|$)")).exec(b)) ? a[2] ? decodeURIComponent(a[2].replace(/\+/g, " ")) : "" : null }
function toggle(a) { all_dealer = "prapor therapist skier peacekeeper mechanic ragman jaeger".split(" "); all_dealer.forEach(b => { a == b || "all" == a ? $("#" + b).show() : $("#" + b).hide() }) } $(document).on("input", "#prapor_search", function (a) { search("prapor") }); $(document).on("input", "#therapist_search", function (a) { search("therapist") }); $(document).on("input", "#skier_search", function (a) { search("skier") }); $(document).on("input", "#peacekeeper_search", function (a) { search("peacekeeper") });
$(document).on("input", "#mechanic_search", function (a) { search("mechanic") }); $(document).on("input", "#ragman_search", function (a) { search("ragman") }); $(document).on("input", "#jaeger_search", function (a) { search("jaeger") }); function search(a) { $("." + a + "_task").each(function () { 0 >= $("#" + a + "_search").val().length ? $(this).show() : -1 == $(this).find("label").text().toUpperCase().replace(" ", "").indexOf($("#" + a + "_search").val().toUpperCase().replace(" ", "")) ? $(this).hide() : $(this).show() }) };
